<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Matrix 3x3 Random Bit</title>

<style>
body{
    font-family:'Segoe UI',sans-serif;
    background:linear-gradient(135deg,#0f0c29,#302b63,#24243e);
    color:white;
    text-align:center;
    padding-top:60px;
    margin:0;
}

h2{
    margin-bottom:40px;
}

.matrix{
    display:grid;
    grid-template-columns:repeat(3,90px);
    gap:25px;
    justify-content:center;
    margin-bottom:50px;
}

.cell{
    height:90px;
    border-radius:15px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:40px;
    font-weight:bold;
    cursor:pointer;
    background:rgba(255,255,255,0.08);
    border:1px solid rgba(255,255,255,0.2);
    backdrop-filter:blur(10px);
    transition:0.2s;
    box-shadow:0 0 15px rgba(0,255,255,0.2);
}

.cell:hover{
    transform:scale(1.1);
    box-shadow:0 0 30px #00ffff;
}

.result{
    display:flex;
    justify-content:center;
    gap:15px;
    margin:30px;
}

.bitbox{
    width:60px;
    height:60px;
    border-radius:12px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:40px;
    font-weight:bold;
    background: red;
    border:1px solid rgba(255,255,255,0.2);
    box-shadow:0 0 15px rgba(0,255,255,0.2);
}

.running{
    box-shadow:0 0 25px #00ffff;
}

.flash{
    animation:flash 0.4s ease-in-out 6;
    background:linear-gradient(45deg,#ff00cc,#3333ff);
}

@keyframes flash{
    0%{opacity:1;}
    50%{opacity:0.5; transform:scale(1.08);}
    100%{opacity:1;}
}

.result-wrapper{
    display:flex;
    flex-direction:column;
    align-items:center;
    margin-top:20px;
    gap:15px;
}

.number-display{
    width:80px;
    height:60px;
    border-radius:14px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:28px;
    font-weight:bold;
    background:linear-gradient(45deg,#ff512f,#f09819);
    color:white;
    box-shadow:0 0 20px rgba(255,150,0,0.8);
    animation:blink 1.5s infinite ease-in-out;
}

@keyframes blink{
    0%{opacity:1; transform:scale(1);}
    50%{opacity:0.6; transform:scale(1.05);}
    100%{opacity:1; transform:scale(1);}
}
</style>
</head>

<body>

<h2>Ma Tráº­n Random 5 Bit</h2>
<div id="result"></div>

<div class="matrix" id="matrix"></div>
<audio id="spinSound" preload="auto">
    <source src="https://www.soundjay.com/misc/sounds/casino-slot-machine-01.mp3" type="audio/mpeg">
</audio>


<script>

const matrix=document.getElementById("matrix");
const result=document.getElementById("result");

const spinSound = document.getElementById("spinSound");

spinSound.loop=true;

for(let i=0;i<=9;i++){
    let cell=document.createElement("div");
    cell.className="cell";
    cell.textContent=i;
    cell.onclick=()=>spin(i);
    matrix.appendChild(cell);
}

function random5Bit(){
    const num=Math.floor(Math.random()*32);
    return num.toString(2).padStart(5,"0");
}

function spin(number){

    result.innerHTML="";

    spinSound.currentTime=0;
    spinSound.currentTime = 0;
spinSound.play().catch(()=>{});


    let duration=3000;
    let start=null;

    let wrapper=document.createElement("div");
    wrapper.className="result-wrapper";
    result.appendChild(wrapper);

    let numberBox=document.createElement("div");
    numberBox.className="number-display";
    numberBox.textContent=number;
    wrapper.appendChild(numberBox);

    let bitRow=document.createElement("div");
    bitRow.className="result";
    wrapper.appendChild(bitRow);

    let bitBoxes=[];
    for(let i=0;i<5;i++){
        let b=document.createElement("div");
        b.className="bitbox running";
        bitRow.appendChild(b);
        bitBoxes.push(b);
    }

    function animate(timestamp){
        if(!start) start=timestamp;

        let progress=timestamp-start;
        let percent=progress/duration;
        if(percent>1) percent=1;

        let interval=20+(180*percent);

        if(progress%interval<16){
            let bits=random5Bit();
            for(let i=0;i<5;i++){
                bitBoxes[i].textContent=bits[i];
            }
        }

        if(progress<duration){
            requestAnimationFrame(animate);
        }else{
            bitBoxes.forEach(b=>{
                b.classList.remove("running");
                b.classList.add("flash");
            });
            spinSound.pause();
            spinSound.currentTime=0;
        }
    }

    requestAnimationFrame(animate);
}
</script>

</body>
</html>

